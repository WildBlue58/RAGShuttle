# é¡¹ç›®ç»“æ„è¯´æ˜

> è¿”å› [æ–‡æ¡£ä¸­å¿ƒ](./README.md) | [é¡¹ç›®ä¸»é¡µ](../README.md)

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ RAGShuttle é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œç»„ç»‡æ–¹å¼ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
RAGShuttle/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”‚       â””â”€â”€ route.ts         # èŠå¤© APIï¼ˆRAG å®ç°ï¼‰
â”‚   â”œâ”€â”€ globals.css               # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ icon.svg                  # åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ page.tsx                  # ä¸»é¡µé¢
â”‚
â”œâ”€â”€ components/                   # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                       # shadcn/ui åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â””â”€â”€ input.tsx
â”‚   â”œâ”€â”€ ChatInput.tsx            # èŠå¤©è¾“å…¥ç»„ä»¶
â”‚   â””â”€â”€ ChatOutput.tsx           # èŠå¤©è¾“å‡ºç»„ä»¶
â”‚
â”œâ”€â”€ lib/                          # å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚   â”œâ”€â”€ utils.ts                 # é€šç”¨å·¥å…·å‡½æ•°ï¼ˆcnã€clsx ç­‰ï¼‰
â”‚   â”œâ”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts             # å…¨å±€ç±»å‹ï¼ˆChunkItemã€ChatMessage ç­‰ï¼‰
â”‚   â””â”€â”€ constants/               # å¸¸é‡é…ç½®
â”‚       â””â”€â”€ index.ts             # é…ç½®å¸¸é‡ï¼ˆå‘é‡æœç´¢ã€AI æ¨¡å‹ç­‰ï¼‰
â”‚
â”œâ”€â”€ scripts/                      # è„šæœ¬æ–‡ä»¶
â”‚   â””â”€â”€ seed.ts                  # çŸ¥è¯†åº“å¡«å……è„šæœ¬ï¼ˆçˆ¬è™« + å‘é‡åŒ–ï¼‰
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â””â”€â”€ favicon.svg              # ç½‘ç«™å›¾æ ‡
â”‚
â”œâ”€â”€ openspec/                     # OpenSpec è§„èŒƒæ–‡æ¡£
â”‚   â”œâ”€â”€ AGENTS.md                # AI åŠ©æ‰‹ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ project.md                # é¡¹ç›®ä¸Šä¸‹æ–‡å’ŒæŠ€æœ¯æ ˆ
â”‚   â”œâ”€â”€ å·¥ä½œæµè¯´æ˜.md            # OpenSpec å·¥ä½œæµè¯´æ˜
â”‚   â”œâ”€â”€ specs/                   # åŠŸèƒ½è§„èŒƒï¼ˆå·²å®ç°ï¼‰
â”‚   â””â”€â”€ changes/                 # å˜æ›´ææ¡ˆï¼ˆå¾…å®ç°/è¿›è¡Œä¸­ï¼‰
â”‚       â”œâ”€â”€ add-chat-history/    # èŠå¤©å†å²åŠŸèƒ½ææ¡ˆ
â”‚       â”œâ”€â”€ convert-to-badminton-domain/  # é¢†åŸŸè¿ç§»ææ¡ˆ
â”‚       â””â”€â”€ archive/             # å·²å½’æ¡£çš„å˜æ›´
â”‚
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ components.json               # shadcn/ui é…ç½®
â”œâ”€â”€ next.config.ts                # Next.js é…ç½®
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ postcss.config.mjs            # PostCSS é…ç½®
â”œâ”€â”€ tsconfig.json                 # TypeScript é…ç½®
â”‚
â”œâ”€â”€ README.md                     # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ docs/                          # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                 # æ–‡æ¡£ä¸­å¿ƒç´¢å¼•
â”‚   â”œâ”€â”€ contributing.md           # è´¡çŒ®æŒ‡å—
â”‚   â”œâ”€â”€ deployment.md             # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ project-highlights.md     # æŠ€æœ¯äº®ç‚¹æ€»ç»“
â”‚   â””â”€â”€ project-structure.md      # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## ğŸ“‹ ç›®å½•è¯´æ˜

### `/app` - Next.js åº”ç”¨ç›®å½•
ä½¿ç”¨ Next.js 15 App Routerï¼ŒåŒ…å«ï¼š
- **é¡µé¢å’Œå¸ƒå±€**ï¼š`page.tsx`ã€`layout.tsx`
- **API è·¯ç”±**ï¼š`api/chat/route.ts` å®ç° RAG èŠå¤©æ¥å£
- **å…¨å±€æ ·å¼**ï¼š`globals.css`

### `/components` - React ç»„ä»¶
- **ä¸šåŠ¡ç»„ä»¶**ï¼š`ChatInput`ã€`ChatOutput`
- **UI åŸºç¡€ç»„ä»¶**ï¼š`ui/` ç›®å½•ä¸‹çš„ shadcn/ui ç»„ä»¶

### `/lib` - å·¥å…·åº“
- **`utils.ts`**ï¼šé€šç”¨å·¥å…·å‡½æ•°ï¼ˆå¦‚ `cn` å‡½æ•°ç”¨äº className åˆå¹¶ï¼‰
- **`types/`**ï¼šé›†ä¸­çš„ç±»å‹å®šä¹‰ï¼Œé¿å…ç±»å‹åˆ†æ•£
- **`constants/`**ï¼šé…ç½®å¸¸é‡ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¿®æ”¹

### `/scripts` - è„šæœ¬æ–‡ä»¶
- **`seed.ts`**ï¼šçŸ¥è¯†åº“æ„å»ºè„šæœ¬ï¼Œè´Ÿè´£çˆ¬å–ã€åˆ†å—ã€å‘é‡åŒ–æ•°æ®

### `/public` - é™æ€èµ„æº
- å­˜æ”¾ä¸éœ€è¦æ„å»ºå¤„ç†çš„é™æ€æ–‡ä»¶ï¼ˆå›¾æ ‡ã€å›¾ç‰‡ç­‰ï¼‰

### `/openspec` - è§„èŒƒæ–‡æ¡£
- ä½¿ç”¨ OpenSpec è¿›è¡Œè§„èŒƒé©±åŠ¨å¼€å‘
- ç»´æŠ¤åŠŸèƒ½è§„èŒƒå’Œå˜æ›´ææ¡ˆ

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. å•ä¸€èŒè´£
æ¯ä¸ªç›®å½•å’Œæ–‡ä»¶éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼Œé¿å…åŠŸèƒ½æ··æ‚ã€‚

### 2. å¯æ‰©å±•æ€§
- `lib/types/` å’Œ `lib/constants/` ä¾¿äºåç»­æ‰©å±•
- `components/` æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡

### 3. ç±»å‹å®‰å…¨
- æ‰€æœ‰ç±»å‹å®šä¹‰é›†ä¸­åœ¨ `lib/types/`
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼

### 4. é…ç½®é›†ä¸­åŒ–
- å¸¸é‡é…ç½®é›†ä¸­åœ¨ `lib/constants/`
- ç¯å¢ƒå˜é‡é€šè¿‡ `.env` ç®¡ç†

## ğŸ“ æ–‡ä»¶å‘½åè§„èŒƒ

- **ç»„ä»¶æ–‡ä»¶**ï¼šPascalCaseï¼ˆå¦‚ `ChatInput.tsx`ï¼‰
- **å·¥å…·æ–‡ä»¶**ï¼šcamelCaseï¼ˆå¦‚ `utils.ts`ï¼‰
- **ç±»å‹æ–‡ä»¶**ï¼š`index.ts`ï¼ˆä¾¿äºå¯¼å…¥ï¼‰
- **å¸¸é‡æ–‡ä»¶**ï¼š`index.ts`ï¼ˆä¾¿äºå¯¼å…¥ï¼‰

## ğŸ”„ å¯¼å…¥è·¯å¾„è§„èŒƒ

ä½¿ç”¨è·¯å¾„åˆ«å `@/` å¼•ç”¨é¡¹ç›®æ ¹ç›®å½•ï¼š

```typescript
// ç±»å‹å¯¼å…¥
import type { ChunkItem, ChatMessage } from "@/lib/types";

// å¸¸é‡å¯¼å…¥
import { VECTOR_SEARCH_CONFIG, AI_MODELS } from "@/lib/constants";

// ç»„ä»¶å¯¼å…¥
import ChatInput from "@/components/ChatInput";
```

## ğŸš€ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½æ—¶
1. **æ–°ç»„ä»¶**ï¼šæ”¾åœ¨ `components/` ç›¸åº”ä½ç½®
2. **æ–°ç±»å‹**ï¼šæ·»åŠ åˆ° `lib/types/index.ts`
3. **æ–°å¸¸é‡**ï¼šæ·»åŠ åˆ° `lib/constants/index.ts`
4. **æ–° API**ï¼šåœ¨ `app/api/` ä¸‹åˆ›å»ºæ–°è·¯ç”±

### æ·»åŠ æ–°è„šæœ¬æ—¶
1. æ”¾åœ¨ `scripts/` ç›®å½•
2. åœ¨ `package.json` ä¸­æ·»åŠ å¯¹åº”è„šæœ¬å‘½ä»¤

---

**æœ€åæ›´æ–°**: 2025-01-31

